{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = `${window.location.protocol}//pixabay.com/api`;\nconst API_KEY = '42024454-8ed2ac239bcd0125bd4fa3d9e';\nconst fullUrl = `${BASE_URL}?key=${API_KEY}`;\n\nconst form = document.querySelector('.searchPhotos');\nconst cardContainer = document.querySelector('.card_container');\n\n\nconst loader = document.createElement('div');\nloader.classList.add('loader');\n\nfunction showLoader() {\n  document.body.appendChild(loader);\n}\n\nfunction hideLoader() {\n  document.body.removeChild(loader);\n}\n\nform.addEventListener('submit', handleSubmit);\n\nfunction fetchImages(q) {\n  showLoader(); \n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  const url = `${BASE_URL}?${params.toString()}`;\n\n  return fetch(url).then(resp => {\n    if (!resp.ok) {\n      throw new Error('Network response was not ok');\n    }\n    return resp.json();\n  });\n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const searchInput = form.elements.search;\n  const searchValue = searchInput.value.trim();\n\n  if (!searchValue) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n\n  fetchImages(searchValue)\n    .then(data => {\n      createMarkup(data.hits);\n      initializeLightbox();\n    })\n    .catch(error => {\n      console.error('Error fetching images:', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'An error occurred while fetching images. Please try again later.',\n      });\n    })\n    .finally(() => {\n      hideLoader(); \n      searchInput.value = ''; \n    });\n}\n\nfunction createMarkup(images) {\n  console.log(images);\n  cardContainer.innerHTML = '';\n\n  images.forEach(image => {\n    const card = document.createElement('a');\n    card.classList.add('card');\n    card.href = image.largeImageURL;\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n    \n    card.appendChild(img);\n    cardContainer.appendChild(card);\n  });\n}\n\nfunction initializeLightbox() {\n  const lightbox = new SimpleLightbox('.card_container a');\n  lightbox.refresh();\n}"],"names":["BASE_URL","API_KEY","form","cardContainer","loader","showLoader","hideLoader","handleSubmit","fetchImages","q","params","url","resp","event","searchInput","searchValue","iziToast","data","createMarkup","initializeLightbox","error","images","image","card","img","SimpleLightbox"],"mappings":"6vBAKA,MAAMA,EAAW,GAAG,OAAO,SAAS,4BAC9BC,EAAU,qCAGVC,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAgB,SAAS,cAAc,iBAAiB,EAGxDC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAU,IAAI,QAAQ,EAE7B,SAASC,GAAa,CACpB,SAAS,KAAK,YAAYD,CAAM,CAClC,CAEA,SAASE,GAAa,CACpB,SAAS,KAAK,YAAYF,CAAM,CAClC,CAEAF,EAAK,iBAAiB,SAAUK,CAAY,EAE5C,SAASC,EAAYC,EAAG,CACtBJ,IAEA,MAAMK,EAAS,IAAI,gBAAgB,CACjC,IAAKT,EACL,EAAGQ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAEKE,EAAM,GAAGX,KAAYU,EAAO,SAAU,IAE5C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAQ,CAC7B,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAM,6BAA6B,EAE/C,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASL,EAAaM,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAcZ,EAAK,SAAS,OAC5Ba,EAAcD,EAAY,MAAM,KAAI,EAE1C,GAAI,CAACC,EAAa,CAChBC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,0EACf,CAAK,EACD,MACD,CAEDR,EAAYO,CAAW,EACpB,KAAKE,GAAQ,CACZC,EAAaD,EAAK,IAAI,EACtBE,GACN,CAAK,EACA,MAAMC,GAAS,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CJ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kEACjB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbV,IACAQ,EAAY,MAAQ,EAC1B,CAAK,CACL,CAEA,SAASI,EAAaG,EAAQ,CAC5B,QAAQ,IAAIA,CAAM,EAClBlB,EAAc,UAAY,GAE1BkB,EAAO,QAAQC,GAAS,CACtB,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,UAAU,IAAI,MAAM,EACzBA,EAAK,KAAOD,EAAM,cAElB,MAAME,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMF,EAAM,aAChBE,EAAI,IAAMF,EAAM,KAEhBC,EAAK,YAAYC,CAAG,EACpBrB,EAAc,YAAYoB,CAAI,CAClC,CAAG,CACH,CAEA,SAASJ,GAAqB,CACX,IAAIM,EAAe,mBAAmB,EAC9C,QAAO,CAClB"}